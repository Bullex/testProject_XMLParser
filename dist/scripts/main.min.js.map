{"version":3,"sources":["const.js","main.js","common.js","xml.js"],"names":["initParser","XML","get","Common","getUrlParameter","MESSAGE_XML_URL_IS_EMPTY","MESSAGE_XML_NOT_LOADED","MESSAGE_XML_SUCCESSFULLY_LOADED","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","showMessage","message","box","document","querySelector","createElement","setAttribute","firstChild","removeChild","content","createTextNode","appendChild","body","insertBefore","render","newElem","newContent","instance","undefined","xmlUrl","xmlLoaded","xmlHttp","XMLHttpRequest","open","onreadystatechange","readyState","status","Exception","ie","window","ActiveXObject","this","async","load","read","implementation","createDocument","onload","setRequestHeader","send","responseXML","getNumberOfInternalLinks","getNumberOfLetters","getNumberOfDeadLinks","querySelectorAll","length","textContent","count","forEach","call","el","getElementById","getAttribute"],"mappings":"AAAA,YCEA,SAASA,cACPC,IAAIC,IAAIC,OAAOC,gBAAgB,QDDjC,GAAMC,0BAA2B,6BAC3BC,uBAAyB,gCACzBC,gCAAkC,+BEDpCJ,QAIFC,gBAAiB,SAAUI,GACzBA,EAAOA,EAAKC,QAAQ,OAAQ,OAAOA,QAAQ,OAAQ,MACnD,IAAIC,GAAQ,GAAIC,QAAO,SAAWH,EAAO,YAAa,KAClDI,EAAUF,EAAMG,KAAKC,SAASC,OAClC,OAAmB,QAAZH,EAAmB,GAAKI,mBAAmBJ,EAAQ,GAAGH,QAAQ,MAAO,OAK9EQ,YAAa,SAAUC,GACrB,GAAIC,GAAMC,SAASC,cAAc,WAKjC,KAJKF,IACHA,EAAMC,SAASE,cAAc,OAC7BH,EAAII,aAAa,KAAM,YAElBJ,EAAIK,YACTL,EAAIM,YAAYN,EAAIK,WAEtB,IAAIE,GAAUN,SAASO,eAAeT,EACtCC,GAAIS,YAAYF,GAEhBN,SAASS,KAAKC,aAAaX,EAAKC,SAASS,KAAKL,aAKhDO,OAAQ,SAAUL,GAChB,GAAIM,GAAUZ,SAASE,cAAc,OACjCW,EAAab,SAASO,eAAeD,EACzCM,GAAQJ,YAAYK,GAEpBb,SAASS,KAAKD,YAAYI,KCpC1B/B,KAGFiC,SAAUC,OAIVjC,IAAK,SAASkC,GACZ,GAAIA,EAAQ,CACV,GAAIC,IAAY,CAEhB,KACE,GAAIC,GAAU,GAAIC,eAClBD,GAAQE,KAAK,MAAOJ,GAAQ,GAC5BE,EAAQG,mBAAqB,WACA,IAAvBH,EAAQI,YACNJ,EAAQK,QAAU,KAAOL,EAAQK,OAAS,IAC5CxC,OAAOc,YAAYV,iCAMrBJ,OAAOc,YAAYX,yBAIzB,MAAOsC,GACL,GAAIC,GAAqC,mBAAxBC,QAAOC,aAEpBF,IACFG,KAAKd,SAAW,GAAIa,eAAc,oBAClCC,KAAKd,SAASe,OAAQ,EAGtBD,KAAKd,SAASgB,KAAKd,GACnBY,KAAKG,OACLd,GAAY,IAEZW,KAAKd,SAAWd,SAASgC,eAAeC,eAAe,GAAI,GAAI,MAC/DL,KAAKd,SAASoB,OAASN,KAAKG,KAC5BH,KAAKd,SAASgB,KAAKd,GACnBC,GAAY,GAIXA,IACHC,EAAQiB,iBAAiB,eAAgB,YACzCjB,EAAQkB,KAAK,IACbR,KAAKd,SAAWI,EAAQmB,YACxBT,KAAKG,YAGPhD,QAAOc,YAAYZ,2BAIvB8C,KAAM,WACJhD,OAAO4B,OAAO,6BAA+BiB,KAAKU,4BAClDvD,OAAO4B,OAAO,gBAAkBiB,KAAKW,sBACrCxD,OAAO4B,OAAO,mCAAqCiB,KAAKY,yBAG1DF,yBAA0B,WACxB,MAAOV,MAAKd,SAAWc,KAAKd,SAAS2B,iBAAiB,eAAeC,OAAS,GAGhFH,mBAAoB,WAClB,MAAOX,MAAKd,SAAWc,KAAKd,SAASV,WAAWuC,YAAYtD,QAAQ,cAAe,IAAIqD,OAAS,GAGlGF,qBAAsB,WACpB,IAAKZ,KAAKd,SACR,MAAO,EAET,IAAIA,GAAWc,KAAKd,SAClB8B,EAAQ,CAQV,UANGC,QAAQC,KACThC,EAAS2B,iBAAiB,eAC1B,SAASM,GACPH,GAAS9B,EAASkC,eAAeD,EAAGE,aAAa,QAAQ5D,QAAQ,OAAQ,KAAO,EAAI,IAGjFuD,GFhFXhE","file":"main.min.js","sourcesContent":["'use strict';\r\n\r\nconst MESSAGE_XML_URL_IS_EMPTY = 'Путь к XML файлу не найден';\r\nconst MESSAGE_XML_NOT_LOADED = 'XML файл не удалось загрузить';\r\nconst MESSAGE_XML_SUCCESSFULLY_LOADED = 'XML файл успешно загрузился!';","'use strict';\r\n\r\nfunction initParser() {\r\n  XML.get(Common.getUrlParameter('xml'));\r\n}\r\n\r\ninitParser();","'use strict';\r\n\r\n// Common functions\r\nvar Common = {\r\n\r\n  // Parameters:\r\n  // name (String) - query parameter name we're looking for\r\n  getUrlParameter: function (name) {\r\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n    var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)', 'i');\r\n    var results = regex.exec(location.search);\r\n    return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n  },\r\n\r\n  // Parameters:\r\n  // message (String) - Message to user\r\n  showMessage: function (message) {\r\n    var box = document.querySelector('#message');\r\n    if (!box) {\r\n      box = document.createElement('div');\r\n      box.setAttribute(\"id\", \"message\");\r\n    }\r\n    while (box.firstChild) {\r\n      box.removeChild(box.firstChild);\r\n    }\r\n    var content = document.createTextNode(message);\r\n    box.appendChild(content);\r\n\r\n    document.body.insertBefore(box, document.body.firstChild);\r\n  },\r\n\r\n  // Parameters:\r\n  // content (String) - Content of new element\r\n  render: function (content) {\r\n    var newElem = document.createElement('div');\r\n    var newContent = document.createTextNode(content);\r\n    newElem.appendChild(newContent);\r\n\r\n    document.body.appendChild(newElem);\r\n  }\r\n\r\n\r\n};","'use strict';\r\n\r\nvar XML = {\r\n\r\n  // Instance of external XML file\r\n  instance: undefined,\r\n\r\n  // Parameters:\r\n  // xmlUrl (String) - XML file URL\r\n  get: function(xmlUrl) {\r\n    if (xmlUrl) {\r\n      var xmlLoaded = false;\r\n\r\n      try {\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.open(\"GET\", xmlUrl, false);\r\n        xmlHttp.onreadystatechange = function() {\r\n          if (xmlHttp.readyState === 4) {\r\n            if (xmlHttp.status >= 200 && xmlHttp.status < 300) {\r\n              Common.showMessage(MESSAGE_XML_SUCCESSFULLY_LOADED);\r\n            }\r\n            else {\r\n              Common.showMessage(MESSAGE_XML_NOT_LOADED);\r\n            }\r\n          } else {\r\n            Common.showMessage(MESSAGE_XML_NOT_LOADED);\r\n          }\r\n        };\r\n      }\r\n      catch (Exception) {\r\n        var ie = (typeof window.ActiveXObject != 'undefined');\r\n\r\n        if (ie) {\r\n          this.instance = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n          this.instance.async = false;\r\n          //while (xmlDoc.readyState != 4) {\r\n          //};\r\n          this.instance.load(xmlUrl);\r\n          this.read();\r\n          xmlLoaded = true;\r\n        } else {\r\n          this.instance = document.implementation.createDocument(\"\", \"\", null);\r\n          this.instance.onload = this.read;\r\n          this.instance.load(xmlUrl);\r\n          xmlLoaded = true;\r\n        }\r\n      }\r\n\r\n      if (!xmlLoaded) {\r\n        xmlHttp.setRequestHeader('Content-Type', 'text/xml');\r\n        xmlHttp.send(\"\");\r\n        this.instance = xmlHttp.responseXML;\r\n        this.read();\r\n      }\r\n    } else {\r\n      Common.showMessage(MESSAGE_XML_URL_IS_EMPTY);\r\n    }\r\n  },\r\n\r\n  read: function() {\r\n    Common.render('Кол-во внутренних ссылок: ' + this.getNumberOfInternalLinks());\r\n    Common.render('Кол-во букв: ' + this.getNumberOfLetters());\r\n    Common.render('Кол-во битых внутренних ссылок: ' + this.getNumberOfDeadLinks());\r\n  },\r\n\r\n  getNumberOfInternalLinks: function() {\r\n    return this.instance ? this.instance.querySelectorAll('[href^=\"#\"]').length : 0;\r\n  },\r\n\r\n  getNumberOfLetters: function() {\r\n    return this.instance ? this.instance.firstChild.textContent.replace(/[^a-zа-я]/gi, '').length : 0;\r\n  },\r\n\r\n  getNumberOfDeadLinks: function() {\r\n    if (!this.instance) {\r\n      return 0;\r\n    }\r\n    var instance = this.instance,\r\n      count = 0;\r\n    // Iterate\r\n    [].forEach.call(\r\n      instance.querySelectorAll('[href^=\"#\"]'),\r\n      function(el){\r\n        count += instance.getElementById(el.getAttribute('href').replace(/^\\W/g, '')) ? 0 : 1;\r\n      }\r\n    );\r\n    return count;\r\n  }\r\n\r\n};"]}